<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Introduction to r2dii.analysis • r2dii.analysis</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Introduction to r2dii.analysis">
<meta property="og:description" content="r2dii.analysis">
<meta name="robots" content="noindex">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">r2dii.analysis</a>
        <span class="version label label-danger" data-toggle="tooltip" data-placement="bottom" title="In-development version">0.1.3.9001</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../articles/r2dii-analysis.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/target-sda.html">Sectoral Decarbonization Approach (SDA)</a>
    </li>
    <li>
      <a href="../articles/target-market-share.html">Market Share Approach</a>
    </li>
    <li>
      <a href="../articles/production-percent-change.html">Indicator Choices: Weighted Production vs. Weighted Percent Change in Production</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    News
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li class="dropdown-header">Releases</li>
    <li>
      <a href="https://2degreesinvesting.github.io/posts/2020-09-08-r2dii-analysis-0-1-0-is-now-on-cran/">Version 0.1.0</a>
    </li>
    <li>
      <a href="https://2degreesinvesting.github.io/posts/2020-06-29-r2dii-analysis-0-0-1/">Version 0.0.1</a>
    </li>
    <li class="divider">
    <li>
      <a href="../news/index.html">Change log</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Packages
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="https://2degreesinvesting.github.io/r2dii.data">r2dii.data</a>
    </li>
    <li>
      <a href="https://2degreesinvesting.github.io/r2dii.match">r2dii.match</a>
    </li>
    <li>
      <a href="https://2degreesinvesting.github.io/r2dii.analysis">r2dii.analysis</a>
    </li>
  </ul>
</li>
<li>
  <a href="https://github.com/2DegreesInvesting/r2dii.analysis">
    <span class="fas fa-github"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="r2dii-analysis_files/accessible-code-block-0.0.1/empty-anchor.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Introduction to r2dii.analysis</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/2DegreesInvesting/r2dii.analysis/blob/master/vignettes/r2dii-analysis.Rmd"><code>vignettes/r2dii-analysis.Rmd</code></a></small>
      <div class="hidden name"><code>r2dii-analysis.Rmd</code></div>

    </div>

    
    
<div id="load-your-r2dii-libraries" class="section level2">
<h2 class="hasAnchor">
<a href="#load-your-r2dii-libraries" class="anchor"></a>Load your r2dii libraries</h2>
<p>The first step in your analysis will be to load in the recommended r2dii packages into your current R session. <a href="https://2degreesinvesting.github.io/r2dii.data">r2dii.data</a> includes fake data to help demonstrate the tool and <a href="https://2degreesinvesting.github.io/r2dii.match">r2dii.match</a> provides functions to help you easily match your loanbook to asset-level data.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://2degreesinvesting.github.io/r2dii.data/">r2dii.data</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://2degreesinvesting.github.io/r2dii.match/">r2dii.match</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/2DegreesInvesting/r2dii.analysis">r2dii.analysis</a></span><span class="op">)</span></code></pre></div>
<p>We also recommend packages in the <a href="https://www.tidyverse.org/">tidyverse</a>; they are optional but useful.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="http://tidyverse.tidyverse.org">tidyverse</a></span><span class="op">)</span>
<span class="co">#&gt; ── Attaching packages ─────────────────────────────────────── tidyverse 1.3.0 ──</span>
<span class="co">#&gt; ✔ ggplot2 3.3.3     ✔ purrr   0.3.4</span>
<span class="co">#&gt; ✔ tibble  3.0.4     ✔ dplyr   1.0.2</span>
<span class="co">#&gt; ✔ tidyr   1.1.2     ✔ stringr 1.4.0</span>
<span class="co">#&gt; ✔ readr   1.4.0     ✔ forcats 0.5.0</span>
<span class="co">#&gt; ── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──</span>
<span class="co">#&gt; ✖ dplyr::filter() masks stats::filter()</span>
<span class="co">#&gt; ✖ dplyr::lag()    masks stats::lag()</span></code></pre></div>
</div>
<div id="match-your-loanbook-to-climate-related-asset-level-data" class="section level2">
<h2 class="hasAnchor">
<a href="#match-your-loanbook-to-climate-related-asset-level-data" class="anchor"></a>Match your loanbook to climate-related asset-level data</h2>
<p>See <a href="https://2degreesinvesting.github.io/r2dii.match">r2dii.match</a> for a more complete description of this process.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Use these datasets to practice but eventually you should use your own data.</span>
<span class="co"># The optional syntax `package::data` is to clarify where the data comes from.</span>
<span class="va">loanbook</span> <span class="op">&lt;-</span> <span class="fu">r2dii.data</span><span class="fu">::</span><span class="va"><a href="https://github.com/2DegreesInvesting/r2dii.data//reference/loanbook_demo.html">loanbook_demo</a></span>
<span class="va">ald</span> <span class="op">&lt;-</span> <span class="fu">r2dii.data</span><span class="fu">::</span><span class="va"><a href="https://github.com/2DegreesInvesting/r2dii.data//reference/ald_demo.html">ald_demo</a></span>

<span class="va">matched</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://github.com/2DegreesInvesting/r2dii.match//reference/match_name.html">match_name</a></span><span class="op">(</span><span class="va">loanbook</span>, <span class="va">ald</span><span class="op">)</span> <span class="op">%&gt;%</span> <span class="fu"><a href="https://github.com/2DegreesInvesting/r2dii.match//reference/prioritize.html">prioritize</a></span><span class="op">(</span><span class="op">)</span>

<span class="va">matched</span>
<span class="co">#&gt; # A tibble: 217 x 28</span>
<span class="co">#&gt;    id_loan id_direct_loant… name_direct_loa… id_intermediate… name_intermedia…</span>
<span class="co">#&gt;    &lt;chr&gt;   &lt;chr&gt;            &lt;chr&gt;            &lt;chr&gt;            &lt;chr&gt;           </span>
<span class="co">#&gt;  1 L6      C304             Yukon Developme… &lt;NA&gt;             &lt;NA&gt;            </span>
<span class="co">#&gt;  2 L13     C297             Yuba City Cogen… &lt;NA&gt;             &lt;NA&gt;            </span>
<span class="co">#&gt;  3 L20     C287             Ytl Powerseraya… &lt;NA&gt;             &lt;NA&gt;            </span>
<span class="co">#&gt;  4 L21     C286             Ytl Power Inter… &lt;NA&gt;             &lt;NA&gt;            </span>
<span class="co">#&gt;  5 L22     C285             Ytl Corp Bhd     &lt;NA&gt;             &lt;NA&gt;            </span>
<span class="co">#&gt;  6 L23     C283             Ypic Internatio… &lt;NA&gt;             &lt;NA&gt;            </span>
<span class="co">#&gt;  7 L24     C282             Ypfb Corporacion &lt;NA&gt;             &lt;NA&gt;            </span>
<span class="co">#&gt;  8 L25     C281             Ypf Sa           &lt;NA&gt;             &lt;NA&gt;            </span>
<span class="co">#&gt;  9 L26     C280             Ypf Energia Ele… &lt;NA&gt;             &lt;NA&gt;            </span>
<span class="co">#&gt; 10 L27     C278             Younicos Ag      &lt;NA&gt;             &lt;NA&gt;            </span>
<span class="co">#&gt; # … with 207 more rows, and 23 more variables: id_ultimate_parent &lt;chr&gt;,</span>
<span class="co">#&gt; #   name_ultimate_parent &lt;chr&gt;, loan_size_outstanding &lt;dbl&gt;,</span>
<span class="co">#&gt; #   loan_size_outstanding_currency &lt;chr&gt;, loan_size_credit_limit &lt;dbl&gt;,</span>
<span class="co">#&gt; #   loan_size_credit_limit_currency &lt;chr&gt;, sector_classification_system &lt;chr&gt;,</span>
<span class="co">#&gt; #   sector_classification_input_type &lt;chr&gt;,</span>
<span class="co">#&gt; #   sector_classification_direct_loantaker &lt;dbl&gt;, fi_type &lt;chr&gt;,</span>
<span class="co">#&gt; #   flag_project_finance_loan &lt;chr&gt;, name_project &lt;lgl&gt;,</span>
<span class="co">#&gt; #   lei_direct_loantaker &lt;lgl&gt;, isin_direct_loantaker &lt;lgl&gt;, id_2dii &lt;chr&gt;,</span>
<span class="co">#&gt; #   level &lt;chr&gt;, sector &lt;chr&gt;, sector_ald &lt;chr&gt;, name &lt;chr&gt;, name_ald &lt;chr&gt;,</span>
<span class="co">#&gt; #   score &lt;dbl&gt;, source &lt;chr&gt;, borderline &lt;lgl&gt;</span></code></pre></div>
</div>
<div id="calculate-targets" class="section level2">
<h2 class="hasAnchor">
<a href="#calculate-targets" class="anchor"></a>Calculate targets</h2>
<p>You can calculate scenario targets using two different approaches: Market Share Approach, or Sectoral Decarbonization Approach.</p>
<div id="market-share-approach" class="section level3">
<h3 class="hasAnchor">
<a href="#market-share-approach" class="anchor"></a>Market Share Approach</h3>
<p>The <a href="https://2degreesinvesting.github.io/r2dii.analysis/articles/target-market-share.html">Market Share Approach</a> is used to calculate scenario targets for the <code>production</code> of a technology in a sector. For example, we can use this approach to set targets for the production of electric vehicles in the automotive sector. This approach is recommended for sectors where a granular technology scenario roadmap exists.</p>
<p>Targets can be set at the portfolio level:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Use these datasets to practice but eventually you should use your own data.</span>
<span class="va">scenario</span> <span class="op">&lt;-</span> <span class="fu">r2dii.data</span><span class="fu">::</span><span class="va"><a href="https://github.com/2DegreesInvesting/r2dii.data//reference/scenario_demo_2020.html">scenario_demo_2020</a></span>
<span class="va">regions</span> <span class="op">&lt;-</span> <span class="fu">r2dii.data</span><span class="fu">::</span><span class="va"><a href="https://github.com/2DegreesInvesting/r2dii.data//reference/region_isos_demo.html">region_isos_demo</a></span>

<span class="va">market_share_targets_portfolio</span> <span class="op">&lt;-</span> <span class="va">matched</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="../reference/target_market_share.html">target_market_share</a></span><span class="op">(</span>
    ald <span class="op">=</span> <span class="va">ald</span>,
    scenario <span class="op">=</span> <span class="va">scenario</span>,
    region_isos <span class="op">=</span> <span class="va">regions</span>
  <span class="op">)</span>

<span class="va">market_share_targets_portfolio</span>
<span class="co">#&gt; # A tibble: 3,492 x 8</span>
<span class="co">#&gt;    sector technology  year region scenario_source metric production</span>
<span class="co">#&gt;    &lt;chr&gt;  &lt;chr&gt;      &lt;int&gt; &lt;chr&gt;  &lt;chr&gt;           &lt;chr&gt;       &lt;dbl&gt;</span>
<span class="co">#&gt;  1 autom… electric    2020 global demo_2020       proje…    324592.</span>
<span class="co">#&gt;  2 autom… electric    2020 global demo_2020       targe…    324592.</span>
<span class="co">#&gt;  3 autom… electric    2020 global demo_2020       targe…    324592.</span>
<span class="co">#&gt;  4 autom… electric    2020 global demo_2020       targe…    324592.</span>
<span class="co">#&gt;  5 autom… electric    2021 global demo_2020       proje…    339656.</span>
<span class="co">#&gt;  6 autom… electric    2021 global demo_2020       targe…    329191.</span>
<span class="co">#&gt;  7 autom… electric    2021 global demo_2020       targe…    352505.</span>
<span class="co">#&gt;  8 autom… electric    2021 global demo_2020       targe…    330435.</span>
<span class="co">#&gt;  9 autom… electric    2022 global demo_2020       proje…    354720.</span>
<span class="co">#&gt; 10 autom… electric    2022 global demo_2020       targe…    333693.</span>
<span class="co">#&gt; # … with 3,482 more rows, and 1 more variable: technology_share &lt;dbl&gt;</span></code></pre></div>
<p>Or at the company level:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">market_share_targets_company</span> <span class="op">&lt;-</span> <span class="va">matched</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="../reference/target_market_share.html">target_market_share</a></span><span class="op">(</span>
    ald <span class="op">=</span> <span class="va">ald</span>,
    scenario <span class="op">=</span> <span class="va">scenario</span>,
    region_isos <span class="op">=</span> <span class="va">regions</span>,
    <span class="co"># Output results at company-level.</span>
    by_company <span class="op">=</span> <span class="cn">TRUE</span> 
  <span class="op">)</span>
<span class="co">#&gt; Warning: You've supplied `by_company = TRUE` and `weight_production = TRUE`.</span>
<span class="co">#&gt; This will result in company-level results, weighted by the portfolio</span>
<span class="co">#&gt; loan size, which is rarely useful. Did you mean to set one of these</span>
<span class="co">#&gt; arguments to `FALSE`?</span>

<span class="va">market_share_targets_company</span>
<span class="co">#&gt; # A tibble: 14,604 x 9</span>
<span class="co">#&gt;    sector technology  year region scenario_source name_ald metric production</span>
<span class="co">#&gt;    &lt;chr&gt;  &lt;chr&gt;      &lt;int&gt; &lt;chr&gt;  &lt;chr&gt;           &lt;chr&gt;    &lt;chr&gt;       &lt;dbl&gt;</span>
<span class="co">#&gt;  1 autom… electric    2020 global demo_2020       toyota … proje…    324592.</span>
<span class="co">#&gt;  2 autom… electric    2020 global demo_2020       toyota … targe…    324592.</span>
<span class="co">#&gt;  3 autom… electric    2020 global demo_2020       toyota … targe…    324592.</span>
<span class="co">#&gt;  4 autom… electric    2020 global demo_2020       toyota … targe…    324592.</span>
<span class="co">#&gt;  5 autom… electric    2021 global demo_2020       toyota … proje…    339656.</span>
<span class="co">#&gt;  6 autom… electric    2021 global demo_2020       toyota … targe…    329191.</span>
<span class="co">#&gt;  7 autom… electric    2021 global demo_2020       toyota … targe…    352505.</span>
<span class="co">#&gt;  8 autom… electric    2021 global demo_2020       toyota … targe…    330435.</span>
<span class="co">#&gt;  9 autom… electric    2022 global demo_2020       toyota … proje…    354720.</span>
<span class="co">#&gt; 10 autom… electric    2022 global demo_2020       toyota … targe…    333693.</span>
<span class="co">#&gt; # … with 14,594 more rows, and 1 more variable: technology_share &lt;dbl&gt;</span></code></pre></div>
</div>
<div id="sectoral-decarbonization-approach" class="section level3">
<h3 class="hasAnchor">
<a href="#sectoral-decarbonization-approach" class="anchor"></a>Sectoral Decarbonization Approach</h3>
<p>The <a href="https://2degreesinvesting.github.io/r2dii.analysis/articles/target-sda.html">Sectoral Decarbonization Approach</a> is used to calculate scenario targets for the <code>emission_factor</code> of a sector. For example, you can use this approach to set targets for the average emission factor of the cement sector. This approach is recommended for sectors lacking technology roadmaps.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Use this dataset to practice but eventually you should use your own data.</span>
<span class="va">co2</span> <span class="op">&lt;-</span> <span class="fu">r2dii.data</span><span class="fu">::</span><span class="va"><a href="https://github.com/2DegreesInvesting/r2dii.data//reference/co2_intensity_scenario_demo.html">co2_intensity_scenario_demo</a></span>

<span class="va">sda_targets</span> <span class="op">&lt;-</span> <span class="va">matched</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="../reference/target_sda.html">target_sda</a></span><span class="op">(</span>ald <span class="op">=</span> <span class="va">ald</span>, co2_intensity_scenario <span class="op">=</span> <span class="va">co2</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="https://rdrr.io/r/stats/filter.html">filter</a></span><span class="op">(</span><span class="va">sector</span> <span class="op">==</span> <span class="st">"cement"</span>, <span class="va">year</span> <span class="op">&gt;=</span> <span class="fl">2020</span><span class="op">)</span>
<span class="co">#&gt; Warning: Removing ald rows where `emission_factor` is NA</span>

<span class="va">sda_targets</span>
<span class="co">#&gt; # A tibble: 105 x 4</span>
<span class="co">#&gt;    sector  year emission_factor_metric emission_factor_value</span>
<span class="co">#&gt;    &lt;chr&gt;  &lt;dbl&gt; &lt;chr&gt;                                  &lt;dbl&gt;</span>
<span class="co">#&gt;  1 cement  2020 projected                              0.664</span>
<span class="co">#&gt;  2 cement  2021 projected                              0.665</span>
<span class="co">#&gt;  3 cement  2022 projected                              0.666</span>
<span class="co">#&gt;  4 cement  2023 projected                              0.667</span>
<span class="co">#&gt;  5 cement  2024 projected                              0.668</span>
<span class="co">#&gt;  6 cement  2025 projected                              0.669</span>
<span class="co">#&gt;  7 cement  2020 corporate_economy                      0.669</span>
<span class="co">#&gt;  8 cement  2021 corporate_economy                      0.670</span>
<span class="co">#&gt;  9 cement  2022 corporate_economy                      0.671</span>
<span class="co">#&gt; 10 cement  2023 corporate_economy                      0.672</span>
<span class="co">#&gt; # … with 95 more rows</span></code></pre></div>
</div>
</div>
<div id="visualization" class="section level2">
<h2 class="hasAnchor">
<a href="#visualization" class="anchor"></a>Visualization</h2>
<p>There are a large variety of possible visualizations stemming from the outputs of <code><a href="../reference/target_market_share.html">target_market_share()</a></code> and <code><a href="../reference/target_sda.html">target_sda()</a></code>. Below, we have highlighted a couple of common plots, along with the minimum code necessary to reproduce them.</p>
<div id="market-share-sector-level-technology-mix" class="section level3">
<h3 class="hasAnchor">
<a href="#market-share-sector-level-technology-mix" class="anchor"></a>Market Share: Sector-level technology mix</h3>
<p>From the market share output, you can plot the portfolio’s exposure to various climate sensitive technologies (<code>projected</code>), and compare with the corporate economy, or against various scenario targets.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Pick the targets you want to plot.</span>
<span class="va">tech_mix_data</span> <span class="op">&lt;-</span> <span class="va">market_share_targets_portfolio</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://rdrr.io/r/stats/filter.html">filter</a></span><span class="op">(</span>
    <span class="va">sector</span> <span class="op">==</span> <span class="st">"power"</span>,
    <span class="va">year</span> <span class="op">==</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html">max</a></span><span class="op">(</span><span class="va">year</span><span class="op">)</span>
  <span class="op">)</span></code></pre></div>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">ggplot</span><span class="op">(</span>
  data <span class="op">=</span> <span class="va">tech_mix_data</span>, 
  mapping <span class="op">=</span> <span class="fu">aes</span><span class="op">(</span>
    x <span class="op">=</span> <span class="va">metric</span>, 
    y <span class="op">=</span> <span class="va">technology_share</span>, 
    fill <span class="op">=</span> <span class="va">technology</span>
  <span class="op">)</span>
<span class="op">)</span> <span class="op">+</span>
  <span class="fu">geom_col</span><span class="op">(</span>position <span class="op">=</span> <span class="st">"fill"</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">labs</span><span class="op">(</span>x <span class="op">=</span> <span class="st">"Metric"</span>, y <span class="op">=</span> <span class="st">"Weighted Capacity [%]"</span><span class="op">)</span></code></pre></div>
<p><img src="r2dii-analysis_files/figure-html/plot-metric-versus-weighted-capacity-1.png" width="100%"></p>
</div>
<div id="market-share-technology-level-volume-trajectory" class="section level3">
<h3 class="hasAnchor">
<a href="#market-share-technology-level-volume-trajectory" class="anchor"></a>Market Share: Technology-level volume trajectory</h3>
<p>You can also plot the technology-specific volume trend. All benchmarks must first be normalized to the initial portfolio value, so that we are effectively comparing ambition.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R">  <span class="va">market_share_targets_portfolio</span> <span class="op">&lt;-</span> <span class="va">market_share_targets_portfolio</span> <span class="op">%&gt;%</span> 
  <span class="fu">select</span><span class="op">(</span><span class="op">-</span><span class="va">technology_share</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu">pivot_wider</span><span class="op">(</span>names_from <span class="op">=</span> <span class="va">metric</span>, 
              values_from <span class="op">=</span> <span class="va">production</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu">arrange</span><span class="op">(</span><span class="va">year</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu">group_by</span><span class="op">(</span><span class="va">sector</span>, <span class="va">technology</span>, <span class="va">region</span>, <span class="va">scenario_source</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu">mutate</span><span class="op">(</span>normalized_corporate_economy <span class="op">=</span> <span class="va">corporate_economy</span> <span class="op">*</span> <span class="op">(</span><span class="fu">first</span><span class="op">(</span><span class="va">projected</span><span class="op">)</span><span class="op">/</span><span class="fu">first</span><span class="op">(</span><span class="va">corporate_economy</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu">select</span><span class="op">(</span><span class="op">-</span><span class="va">corporate_economy</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu">pivot_longer</span><span class="op">(</span>names_to <span class="op">=</span> <span class="st">"metric"</span>,
               cols <span class="op">=</span> <span class="va">projected</span><span class="op">:</span><span class="va">normalized_corporate_economy</span>,
               values_to <span class="op">=</span> <span class="st">"production"</span><span class="op">)</span>

<span class="va">renewables_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/filter.html">filter</a></span><span class="op">(</span>
  <span class="va">market_share_targets_portfolio</span>,
  <span class="va">sector</span> <span class="op">==</span> <span class="st">"power"</span>,
  <span class="va">technology</span> <span class="op">==</span> <span class="st">"renewablescap"</span>,
  <span class="va">region</span> <span class="op">==</span> <span class="st">"global"</span>
<span class="op">)</span>

<span class="va">just_targets</span> <span class="op">&lt;-</span> <span class="va">renewables_data</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://rdrr.io/r/stats/filter.html">filter</a></span><span class="op">(</span><span class="fu">str_detect</span><span class="op">(</span><span class="va">metric</span>, <span class="st">"target_"</span><span class="op">)</span><span class="op">)</span>

<span class="va">ceiling</span> <span class="op">&lt;-</span> <span class="va">just_targets</span> <span class="op">%&gt;%</span>
  <span class="fu">group_by</span><span class="op">(</span><span class="va">sector</span>, <span class="va">technology</span>, <span class="va">year</span>, <span class="va">region</span>, <span class="va">scenario_source</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu">summarize</span><span class="op">(</span>
    metric <span class="op">=</span> <span class="st">"target_ceiling"</span>,
    production <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html">max</a></span><span class="op">(</span><span class="va">production</span><span class="op">)</span>
  <span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu">group_by</span><span class="op">(</span><span class="va">sector</span>, <span class="va">technology</span>, <span class="va">region</span>, <span class="va">scenario_source</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu">mutate</span><span class="op">(</span>production <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html">max</a></span><span class="op">(</span><span class="va">production</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt; `summarise()` regrouping output by 'sector', 'technology', 'year', 'region' (override with `.groups` argument)</span>

<span class="va">just_data</span> <span class="op">&lt;-</span> <span class="va">renewables_data</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://rdrr.io/r/stats/filter.html">filter</a></span><span class="op">(</span><span class="op">!</span><span class="fu">str_detect</span><span class="op">(</span><span class="va">metric</span>, <span class="st">"target_"</span><span class="op">)</span><span class="op">)</span>

<span class="va">targets_and_ceiling</span> <span class="op">&lt;-</span> <span class="va">just_targets</span> <span class="op">%&gt;%</span>
  <span class="fu">bind_rows</span><span class="op">(</span><span class="va">ceiling</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu">group_by</span><span class="op">(</span><span class="va">year</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu">arrange</span><span class="op">(</span><span class="va">year</span>, <span class="va">production</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu">mutate</span><span class="op">(</span>
    previous_value <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/lag.html">lag</a></span><span class="op">(</span><span class="va">production</span>, default <span class="op">=</span> <span class="fl">0</span><span class="op">)</span>
  <span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://rdrr.io/r/stats/filter.html">filter</a></span><span class="op">(</span><span class="va">region</span> <span class="op">==</span> <span class="st">"global"</span><span class="op">)</span></code></pre></div>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">ggplot</span><span class="op">(</span>
  data <span class="op">=</span> <span class="va">targets_and_ceiling</span>,
  mapping <span class="op">=</span> <span class="fu">aes</span><span class="op">(</span>
    x <span class="op">=</span> <span class="va">year</span>,
    y <span class="op">=</span> <span class="va">production</span>,
    fill <span class="op">=</span> <span class="va">metric</span>
  <span class="op">)</span>
<span class="op">)</span> <span class="op">+</span>
  <span class="fu">geom_ribbon</span><span class="op">(</span>
    data <span class="op">=</span> <span class="va">targets_and_ceiling</span>,
    mapping <span class="op">=</span> <span class="fu">aes</span><span class="op">(</span>ymin <span class="op">=</span> <span class="va">previous_value</span>, ymax <span class="op">=</span> <span class="va">production</span><span class="op">)</span>
  <span class="op">)</span> <span class="op">+</span>
  <span class="fu">geom_line</span><span class="op">(</span>
    data <span class="op">=</span> <span class="va">just_data</span>, 
    mapping <span class="op">=</span> <span class="fu">aes</span><span class="op">(</span>
      x <span class="op">=</span> <span class="va">year</span>, 
      y <span class="op">=</span> <span class="va">production</span>, 
      linetype <span class="op">=</span> <span class="va">metric</span>
    <span class="op">)</span>
  <span class="op">)</span> <span class="op">+</span>
  <span class="fu">facet_wrap</span><span class="op">(</span><span class="fu">vars</span><span class="op">(</span><span class="va">sector</span>, <span class="va">technology</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt; Warning in max(ids, na.rm = TRUE): no non-missing arguments to max; returning -</span>
<span class="co">#&gt; Inf</span>
<span class="co">#&gt; Warning: Removed 35 row(s) containing missing values (geom_path).</span></code></pre></div>
<p><img src="r2dii-analysis_files/figure-html/plot-year-versus-weithed-production-value-1.png" width="100%"></p>
</div>
<div id="sda-target" class="section level3">
<h3 class="hasAnchor">
<a href="#sda-target" class="anchor"></a>SDA Target</h3>
<p>From the SDA output, we can compare the projected average emission intensity attributed to the portfolio, with the actual emission intensity scenario, and the scenario compliant SDA pathway that the portfolio must follow to achieve the scenario ambition by 2050.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">ggplot</span><span class="op">(</span>
  data <span class="op">=</span> <span class="va">sda_targets</span>, 
  mapping <span class="op">=</span> <span class="fu">aes</span><span class="op">(</span>
    x <span class="op">=</span> <span class="va">year</span>, 
    y <span class="op">=</span> <span class="va">emission_factor_value</span>, 
    color <span class="op">=</span> <span class="va">emission_factor_metric</span><span class="op">)</span>
<span class="op">)</span> <span class="op">+</span>
  <span class="fu">geom_line</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">facet_wrap</span><span class="op">(</span><span class="op">~</span> <span class="va">sector</span><span class="op">)</span>
<span class="co">#&gt; Warning: Removed 31 row(s) containing missing values (geom_path).</span></code></pre></div>
<p><img src="r2dii-analysis_files/figure-html/sda%20plot-1.png" width="100%"></p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by <a href="https://github.com/jdhoffa/">Jackson Hoffart</a>, <a href="https://github.com/maurolepore/">Mauro Lepore</a>, Klaus Hogedorn, <a href="https://2degrees-investing.org/">2 Degrees Investing Initiative</a>.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
