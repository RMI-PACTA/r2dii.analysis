<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Add targets for CO2 emissions per unit production at the portfolio level,
using the SDA approach — target_sda • r2dii.analysis</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous" />


<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Add targets for CO2 emissions per unit production at the portfolio level,
using the SDA approach — target_sda" />
<meta property="og:description" content="This function calculates targets of CO2 emissions per unit production at the
portfolio-level, otherwise referred to as &quot;emissions factors&quot;. It uses the
sectoral-decarbonization approach (SDA)
to calculate these targets." />


<meta name="robots" content="noindex">

<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">r2dii.analysis</a>
        <span class="version label label-danger" data-toggle="tooltip" data-placement="bottom" title="In-development version">0.1.12.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../articles/r2dii-analysis.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/target-sda.html">Sectoral Decarbonization Approach (SDA)</a>
    </li>
    <li>
      <a href="../articles/target-market-share.html">Market Share Approach</a>
    </li>
    <li>
      <a href="../articles/production-percent-change.html">Indicator Choices: Weighted Production vs. Weighted Percent Change in Production</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    News
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="https://2degreesinvesting.github.io/#category:r2dii">r2dii blog posts</a>
    </li>
    <li class="divider"></li>
    <li>
      <a href="../news/index.html">Change log</a>
    </li>
  </ul>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Packages
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="https://2degreesinvesting.github.io/r2dii.data">r2dii.data</a>
    </li>
    <li>
      <a href="https://2degreesinvesting.github.io/r2dii.match">r2dii.match</a>
    </li>
    <li>
      <a href="https://2degreesinvesting.github.io/r2dii.analysis">r2dii.analysis</a>
    </li>
    <li>
      <a href="https://2degreesinvesting.github.io/r2dii.plot">r2dii.plot</a>
    </li>
  </ul>
</li>
<li>
  <a href="https://github.com/2DegreesInvesting/r2dii.analysis">
    <span class="fa fa-github"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Add targets for CO2 emissions per unit production at the portfolio level,
using the SDA approach</h1>
    <small class="dont-index">Source: <a href='https://github.com/2DegreesInvesting/r2dii.analysis/blob/master/R/target_sda.R'><code>R/target_sda.R</code></a></small>
    <div class="hidden name"><code>target_sda.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>This function calculates targets of CO2 emissions per unit production at the
portfolio-level, otherwise referred to as "emissions factors". It uses the
<a href='https://2degreesinvesting.github.io/r2dii.analysis/articles/sda-target.html'>sectoral-decarbonization approach (SDA)</a>
to calculate these targets.</p>
    </div>

    <pre class="usage"><span class='fu'>target_sda</span><span class='op'>(</span>
  <span class='va'>data</span>,
  <span class='va'>ald</span>,
  <span class='va'>co2_intensity_scenario</span>,
  use_credit_limit <span class='op'>=</span> <span class='cn'>FALSE</span>,
  by_company <span class='op'>=</span> <span class='cn'>FALSE</span>
<span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>data</th>
      <td><p>A dataframe like the output of
<code><a href='https://github.com/2DegreesInvesting/r2dii.match//reference/prioritize.html'>r2dii.match::prioritize()</a></code>.</p></td>
    </tr>
    <tr>
      <th>ald</th>
      <td><p>An asset-level data frame like <a href='https://github.com/2DegreesInvesting/r2dii.data//reference/ald_demo.html'>r2dii.data::ald_demo</a>.</p></td>
    </tr>
    <tr>
      <th>co2_intensity_scenario</th>
      <td><p>A scenario data frame like
<a href='https://github.com/2DegreesInvesting/r2dii.data//reference/co2_intensity_scenario_demo.html'>r2dii.data::co2_intensity_scenario_demo</a>.</p></td>
    </tr>
    <tr>
      <th>use_credit_limit</th>
      <td><p>Logical vector of length 1. <code>FALSE</code> defaults to using
the column <code>loan_size_outstanding</code>. Set to <code>TRUE</code> to instead use the column
<code>loan_size_credit_limit</code>.</p></td>
    </tr>
    <tr>
      <th>by_company</th>
      <td><p>Logical vector of length 1. <code>FALSE</code> defaults to outputting
<code>weighted_production_value</code> at the portfolio-level. Set to <code>TRUE</code> to output
<code>weighted_production_value</code> at the company-level.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>A tibble with the CO2 emissions factors attributed to
the portfolio. These values include the portfolio's actual projected CO2
emissions factors, the scenario pathway CO2 emissions factors and the SDA
calculated portfolio target emissions factors (see column
<code>emission_factor_metric</code>).</p>
    <h2 class="hasAnchor" id="handling-grouped-data"><a class="anchor" href="#handling-grouped-data"></a>Handling grouped data</h2>

    

<p>This function ignores existing groups and outputs ungrouped data.</p>
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p>Other functions to calculate scenario targets: 
<code><a href='target_market_share.html'>target_market_share</a>()</code></p></div>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='va'>installed</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/ns-load.html'>requireNamespace</a></span><span class='op'>(</span><span class='st'>"r2dii.match"</span>, quietly <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span> <span class='op'>&amp;&amp;</span>
  <span class='fu'><a href='https://rdrr.io/r/base/ns-load.html'>requireNamespace</a></span><span class='op'>(</span><span class='st'>"r2dii.data"</span>, quietly <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span>
<span class='kw'>if</span> <span class='op'>(</span><span class='va'>installed</span><span class='op'>)</span> <span class='op'>{</span>
  <span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='https://2degreesinvesting.github.io/r2dii.match/'>r2dii.match</a></span><span class='op'>)</span>
  <span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='https://2degreesinvesting.github.io/r2dii.data/'>r2dii.data</a></span><span class='op'>)</span>

  <span class='co'># Example datasets from r2dii.data</span>
  <span class='va'>loanbook</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='va'>loanbook_demo</span>, <span class='fl'>150</span><span class='op'>)</span>
  <span class='va'>ald</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='va'>ald_demo</span>, <span class='fl'>100</span><span class='op'>)</span>

  <span class='va'>co2_scenario</span> <span class='op'>&lt;-</span> <span class='va'>co2_intensity_scenario_demo</span>

  <span class='co'># WARNING: Remember to validate matches (see `?prioritize`)</span>
  <span class='va'>matched</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://github.com/2DegreesInvesting/r2dii.match//reference/prioritize.html'>prioritize</a></span><span class='op'>(</span><span class='fu'><a href='https://github.com/2DegreesInvesting/r2dii.match//reference/match_name.html'>match_name</a></span><span class='op'>(</span><span class='va'>loanbook</span>, <span class='va'>ald</span><span class='op'>)</span><span class='op'>)</span>

  <span class='co'># You may need to clean your data</span>
  <span class='fu'><a href='https://rdrr.io/r/base/NA.html'>anyNA</a></span><span class='op'>(</span><span class='va'>ald</span><span class='op'>$</span><span class='va'>emission_factor</span><span class='op'>)</span>
  <span class='kw'><a href='https://rdrr.io/r/base/try.html'>try</a></span><span class='op'>(</span><span class='fu'>target_sda</span><span class='op'>(</span><span class='va'>matched</span>, <span class='va'>ald</span>, co2_intensity_scenario <span class='op'>=</span> <span class='va'>co2_scenario</span><span class='op'>)</span><span class='op'>)</span>

  <span class='va'>ald2</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/subset.html'>subset</a></span><span class='op'>(</span><span class='va'>ald</span>, <span class='op'>!</span><span class='fu'><a href='https://rdrr.io/r/base/NA.html'>is.na</a></span><span class='op'>(</span><span class='va'>emission_factor</span><span class='op'>)</span><span class='op'>)</span>
  <span class='fu'><a href='https://rdrr.io/r/base/NA.html'>anyNA</a></span><span class='op'>(</span><span class='va'>ald2</span><span class='op'>$</span><span class='va'>emission_factor</span><span class='op'>)</span>

  <span class='va'>out</span> <span class='op'>&lt;-</span> <span class='fu'>target_sda</span><span class='op'>(</span><span class='va'>matched</span>, <span class='va'>ald2</span>, co2_intensity_scenario <span class='op'>=</span> <span class='va'>co2_scenario</span><span class='op'>)</span>

  <span class='co'># The output includes the portfolio's actual projected emissions factors, the</span>
  <span class='co'># scenario pathway emissions factors, and the portfolio's target emissions</span>
  <span class='co'># factors.</span>
  <span class='va'>out</span>

  <span class='co'># Split-view by metric</span>
  <span class='fu'><a href='https://rdrr.io/r/base/split.html'>split</a></span><span class='op'>(</span><span class='va'>out</span>, <span class='va'>out</span><span class='op'>$</span><span class='va'>emission_factor_metric</span><span class='op'>)</span>

  <span class='co'># Calculate company-level targets</span>
  <span class='va'>out</span> <span class='op'>&lt;-</span> <span class='fu'>target_sda</span><span class='op'>(</span>
    <span class='va'>matched</span>, <span class='va'>ald2</span>,
    co2_intensity_scenario <span class='op'>=</span> <span class='va'>co2_scenario</span>,
    by_company <span class='op'>=</span> <span class='cn'>TRUE</span>
  <span class='op'>)</span>
  <span class='va'>out</span>
<span class='op'>}</span>
</div><div class='output co'>#&gt; <span class='warning'>Warning: Removing ald rows where `emission_factor` is NA</span></div><div class='output co'>#&gt; <span style='color: #949494;'># A tibble: 75 × 5</span>
#&gt;    sector  year emission_factor_metric emission_factor_value name_ald
#&gt;    <span style='color: #949494; font-style: italic;'>&lt;chr&gt;</span>  <span style='color: #949494; font-style: italic;'>&lt;dbl&gt;</span> <span style='color: #949494; font-style: italic;'>&lt;chr&gt;</span>                                  <span style='color: #949494; font-style: italic;'>&lt;dbl&gt;</span> <span style='color: #949494; font-style: italic;'>&lt;chr&gt;</span>   
#&gt; <span style='color: #BCBCBC;'> 1</span> cement  <span style='text-decoration: underline;'>2</span>013 corporate_economy                      0.643 market  
#&gt; <span style='color: #BCBCBC;'> 2</span> cement  <span style='text-decoration: underline;'>2</span>014 corporate_economy                      0.654 market  
#&gt; <span style='color: #BCBCBC;'> 3</span> cement  <span style='text-decoration: underline;'>2</span>015 corporate_economy                      0.666 market  
#&gt; <span style='color: #BCBCBC;'> 4</span> cement  <span style='text-decoration: underline;'>2</span>016 corporate_economy                      0.677 market  
#&gt; <span style='color: #BCBCBC;'> 5</span> cement  <span style='text-decoration: underline;'>2</span>017 corporate_economy                      0.689 market  
#&gt; <span style='color: #BCBCBC;'> 6</span> cement  <span style='text-decoration: underline;'>2</span>018 corporate_economy                      0.700 market  
#&gt; <span style='color: #BCBCBC;'> 7</span> cement  <span style='text-decoration: underline;'>2</span>019 corporate_economy                      0.712 market  
#&gt; <span style='color: #BCBCBC;'> 8</span> cement  <span style='text-decoration: underline;'>2</span>020 corporate_economy                      0.723 market  
#&gt; <span style='color: #BCBCBC;'> 9</span> cement  <span style='text-decoration: underline;'>2</span>021 corporate_economy                      0.735 market  
#&gt; <span style='color: #BCBCBC;'>10</span> cement  <span style='text-decoration: underline;'>2</span>022 corporate_economy                      0.746 market  
#&gt; <span style='color: #949494;'># … with 65 more rows</span></div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by <a href='https://github.com/jdhoffa/'>Jackson Hoffart</a>, <a href='https://github.com/maurolepore/'>Mauro Lepore</a>, Klaus Hogedorn, <a href='https://2degrees-investing.org/'>2 Degrees Investing Initiative</a>.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


