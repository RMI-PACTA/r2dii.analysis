<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="r2dii.analysis">
<title>Indicator Choices: • r2dii.analysis</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Indicator Choices:">
<meta property="og:description" content="r2dii.analysis">
<meta property="og:image" content="https://rmi-pacta.github.io/r2dii.analysis/logo.png">
<meta name="robots" content="noindex">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-default navbar-expand-lg bg-primary"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">r2dii.analysis</a>

    <small class="nav-text text-danger me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="In-development version">0.2.1.9000</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../articles/r2dii-analysis.html">Get started</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/target-sda.html">Sectoral Decarbonization Approach (SDA)</a>
    <a class="dropdown-item" href="../articles/target-market-share.html">Market Share Approach</a>
    <a class="dropdown-item" href="../articles/production-percent-change.html">Indicator Choices: Weighted Production vs. Weighted Percent Change in Production</a>
  </div>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-news">News</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-news">
    <a class="external-link dropdown-item" href="https://rmi-pacta.github.io/#category:r2dii">r2dii blog posts</a>
    <div class="dropdown-divider"></div>
    <a class="dropdown-item" href="../news/index.html">Change log</a>
  </div>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-packages">Packages</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-packages">
    <a class="external-link dropdown-item" href="https://rmi-pacta.github.io/r2dii.data">r2dii.data</a>
    <a class="external-link dropdown-item" href="https://rmi-pacta.github.io/r2dii.match">r2dii.match</a>
    <a class="dropdown-item" href="https://rmi-pacta.github.io/r2dii.analysis">r2dii.analysis</a>
    <a class="external-link dropdown-item" href="https://rmi-pacta.github.io/r2dii.plot">r2dii.plot</a>
  </div>
</li>
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/RMI-PACTA/r2dii.analysis">
    <span class="fa fa-github"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Indicator Choices:</h1>
            <h3 data-toc-skip class="subtitle">Weighted Production
vs. Weighted Percent Change in Production</h3>
            
      
      <small class="dont-index">Source: <a href="https://github.com/RMI-PACTA/r2dii.analysis/blob/HEAD/vignettes/production-percent-change.Rmd" class="external-link"><code>vignettes/production-percent-change.Rmd</code></a></small>
      <div class="d-none name"><code>production-percent-change.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="weighted-production">Weighted Production<a class="anchor" aria-label="anchor" href="#weighted-production"></a>
</h2>
<p>For most intents and purposes, we recommend calculating all targets
using the loan weighted production as an indicator. In particular, we
define the loan weighted production of a given company, <span class="math inline">\(j\)</span> as: <span class="math display">\[
\overline{p}_{i,j}(t) = p_{i,j}(t) * \dfrac{l_j}{\sum_j l_j}\]</span>
where <span class="math inline">\(p_{i,j}\)</span> is the production of
company <span class="math inline">\(i\)</span> in technology <span class="math inline">\(j\)</span> and <span class="math inline">\(l_j\)</span> is the loan given to company <span class="math inline">\(j\)</span>.</p>
<p>To calculate portfolio targets, we aggregate this value by summing
over every company in the portfolio: <span class="math display">\[
\overline{p}_i (t) = \sum_j \left[  p_{i,j}(t) * \dfrac{l_j}{\sum_j l_j}
\right] \]</span></p>
<p>Effectively, this is a loan-weighted average of the production
attributed to each company in your portfolio. A significant result of
this indicator choice is that small companies (with little production)
will be favorably weighted, given that the loan to that company is
sufficiently large. This can be useful to reflect large investments into
green start-ups.</p>
<p>To calculate the weighted production:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://rmi-pacta.github.io/r2dii.data/" class="external-link">r2dii.data</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://rmi-pacta.github.io/r2dii.match/" class="external-link">r2dii.match</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/RMI-PACTA/r2dii.analysis" class="external-link">r2dii.analysis</a></span><span class="op">)</span></span>
<span></span>
<span><span class="va">master</span> <span class="op">&lt;-</span> <span class="va">loanbook_demo</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://rmi-pacta.github.io/r2dii.match/reference/match_name.html" class="external-link">match_name</a></span><span class="op">(</span><span class="va">abcd_demo</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://rmi-pacta.github.io/r2dii.match/reference/prioritize.html" class="external-link">prioritize</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/join_abcd_scenario.html">join_abcd_scenario</a></span><span class="op">(</span></span>
<span>    abcd <span class="op">=</span> <span class="va">abcd_demo</span>,</span>
<span>    scenario <span class="op">=</span> <span class="va">scenario_demo_2020</span>,</span>
<span>    region_isos <span class="op">=</span> <span class="va">region_isos_demo</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="../reference/summarize_weighted_production.html">summarize_weighted_production</a></span><span class="op">(</span><span class="va">master</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 138 × 5</span></span></span>
<span><span class="co">#&gt;    sector_abcd technology  year weighted_production weighted_technology_share</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>               <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>                     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> automotive  electric    <span style="text-decoration: underline;">2</span>020             <span style="text-decoration: underline;">973</span>775.                     0.114</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> automotive  electric    <span style="text-decoration: underline;">2</span>021            1<span style="text-decoration: underline;">018</span>967.                     0.118</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> automotive  electric    <span style="text-decoration: underline;">2</span>022            1<span style="text-decoration: underline;">064</span>159.                     0.122</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> automotive  electric    <span style="text-decoration: underline;">2</span>023            1<span style="text-decoration: underline;">109</span>351.                     0.126</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> automotive  electric    <span style="text-decoration: underline;">2</span>024            1<span style="text-decoration: underline;">154</span>543.                     0.130</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> automotive  electric    <span style="text-decoration: underline;">2</span>025            1<span style="text-decoration: underline;">199</span>735.                     0.133</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> automotive  electric    <span style="text-decoration: underline;">2</span>026            1<span style="text-decoration: underline;">244</span>926.                     0.137</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> automotive  hybrid      <span style="text-decoration: underline;">2</span>020            1<span style="text-decoration: underline;">886</span>042.                     0.221</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> automotive  hybrid      <span style="text-decoration: underline;">2</span>021            1<span style="text-decoration: underline;">709</span>634.                     0.198</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> automotive  hybrid      <span style="text-decoration: underline;">2</span>022            1<span style="text-decoration: underline;">533</span>226.                     0.176</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># … with 128 more rows</span></span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="weighted-percent-change-in-production">Weighted Percent Change in Production<a class="anchor" aria-label="anchor" href="#weighted-percent-change-in-production"></a>
</h2>
<p>On the other-hand, if you’re more keen to understand if the large
corporations in your portfolio are planning to make any significant
changes, the percent change in production may be a more useful
indicator.</p>
<p>For each company, we define the percent change, <span class="math inline">\(\chi_i(t)\)</span>, as compared to the start year,
<span class="math inline">\(t_0\)</span>:</p>
<p><span class="math display">\[ \chi_i(t)
=  \dfrac{p_{i}(t)-p_{i}(t_0)}{p_i(t_0)} * 100\]</span> where <span class="math inline">\(p_i(t)\)</span> is the indicator (production or
capacity) of technology <span class="math inline">\(i\)</span>, and
<span class="math inline">\(t0\)</span> is the start year of the
analysis.</p>
<p>We aggregate the percent-change in production for each company to the
portfolio-level, by using the same loan-weighted average as above. In
particular, for each loan <span class="math inline">\(l_j\)</span> to
company <span class="math inline">\(j\)</span>, we have: <span class="math display">\[ \overline{\chi_i} = \sum_j \left[ \chi_{i,j} *
\dfrac{l_j}{\sum_j l_j} \right]\]</span></p>
<p>It should be noted that the percent change, <span class="math inline">\(\chi\)</span>, is undefined for 0 initial
production. Intuitively, this makes sense, since you would require an
“infinite percent” build-out to grow to anything from 0. For this
reason, any company having 0 initial production is filtered out prior to
calculating the percent change indicator.</p>
<p>To calculate the weighted percent change:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># using the master dataset defined in the previous chunk:</span></span>
<span><span class="fu"><a href="../reference/summarize_weighted_production.html">summarize_weighted_percent_change</a></span><span class="op">(</span><span class="va">master</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 138 × 4</span></span></span>
<span><span class="co">#&gt;    sector_abcd technology  year weighted_percent_change</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>                   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> automotive  electric    <span style="text-decoration: underline;">2</span>020                  0     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> automotive  electric    <span style="text-decoration: underline;">2</span>021                  0.088<span style="text-decoration: underline;">1</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> automotive  electric    <span style="text-decoration: underline;">2</span>022                  0.176 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> automotive  electric    <span style="text-decoration: underline;">2</span>023                  0.264 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> automotive  electric    <span style="text-decoration: underline;">2</span>024                  0.352 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> automotive  electric    <span style="text-decoration: underline;">2</span>025                  0.440 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> automotive  electric    <span style="text-decoration: underline;">2</span>026                  0.528 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> automotive  hybrid      <span style="text-decoration: underline;">2</span>020                  1.78  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> automotive  hybrid      <span style="text-decoration: underline;">2</span>021                  1.43  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> automotive  hybrid      <span style="text-decoration: underline;">2</span>022                  1.09  </span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># … with 128 more rows</span></span></span></code></pre></div>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by <a href="https://github.com/jdhoffa/" class="external-link">Jackson Hoffart</a>, <a href="https://github.com/maurolepore/" class="external-link">Mauro Lepore</a>, Klaus Hogedorn, Nicky Halterman, <a href="https://rmi.org/" class="external-link">Rocky Mountain Institute</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
